<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="consulta.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <title>Document</title>
</head>

<body onload="load()">
    <header>
        <div class="container p-5">
            <div class="containerimg">
                <label class="topo">Clientes, Cadastros e Produtos</label>
            </div>

        </div>
    </header>


    <thead class="thead">



        <div class="dadoscliente">

            <label for="nome">Nome</label>
            <input type="text" id="nome" placeholder="Informe seu nome completo" />
            <label for="nome">E-mail</label>
            <input type="email" id="email" placeholder="Informe seu e-mail" />
            <label for="nome">Telefone</label>
            <input type="tel" id="fone" placeholder="Informe seu telefone" />
            <button onclick="enviarDados()" class="btn btn-outline-primary btn-sm">Incluir</button>


            <div class="botoes">
                <button class="btn btn-outline-primary btn-sm">Consultar Clientes</button>
                <button class="btn btn-outline-primary btn-sm">Consultar Produtos</button>
            </div>

        </div>
        
        <div class="dadoscadastro">
        <table class="table table-dark">
        </thead>
        <tr>
            <th>Nome</th>
            <th>E-mail</th>
            <th>Telefone</th>
        </tr>
        <tbody id="dados" id="limpar"></tbody>
    </thead>
</table>
</div>


    <script>



        function load() {
            fetch("http://localhost:3000/clientes")
                .then(x => x.json())
                .then(y => display(y))
        }

        function display(dados) {
            let linhas = ""
            for (let i = 0; i < dados.length; i++) {
                linhas +=
                    `<tr><td>${dados[i].id}</td>
                     <td>${dados[i].nome}</td>
                     <td>${dados[i].email}</td>
                     <td>${dados[i].fone}</td>
                    </tr>`

            }

            document.getElementById("dados").innerHTML = linhas
        }

        function enviarDados() {

            const dados = {
                nome: document.getElementById("nome").value,
                email: document.getElementById("email").value,
                fone: document.getElementById("fone").value
            }

            fetch("http://localhost:3000/clientes", {
                method: "POST",
                body: JSON.stringify(dados),
                headers: { "Content-type": "application/json; charset=UTF-8" }
            })
            window.location.reload()
        }


    </script>

    <footer class="rodape">
        LUCASCRISTI Â©
    </footer>

</body>

</html>